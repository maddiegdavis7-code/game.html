<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kozy Kollectibles – Y2K Pixel Game</title>
<style>
    body {
        background: #000;
        margin: 0;
        overflow: hidden;
    }
    canvas {
        image-rendering: pixelated;
        display: block;
        margin: auto;
        border: 4px solid #ff7bf0;
        background: #120018;
    }
</style>
</head>
<body>
<canvas id="game" width="640" height="360"></canvas>

<script>
// -------------------------
// Embedded Pixel Logo
// -------------------------
const logoImg = new Image();
logoImg.src = "data:image/jpeg;base64,/9j/4QDKRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAEaAAUAAAABAAAAVgE...AAAAQAAAEgAAAABAAeQAAAHAAAABDAyMjGRAQAHAAAABAECAwCgAAAHAAAABDAx";

// -------------------------
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gameState = "title";  // "title" → "play"

let player = {
    x: 50,
    y: 250,
    w: 20,
    h: 20,
    color: "#ff77ff",
    speed: 3,
};

let keys = {};
let shelves = [
    {x: 100, y: 200, w: 60, h: 20},
    {x: 200, y: 150, w: 80, h: 20},
    {x: 350, y: 220, w: 60, h: 20},
    {x: 500, y: 180, w: 80, h: 20}
];

document.addEventListener("keydown", (e) => {
    keys[e.key] = true;

    if (gameState === "title" && e.key === "Enter") {
        gameState = "play";
    }
});

document.addEventListener("keyup", (e) => {
    keys[e.key] = false;
});

function update() {
    if (gameState !== "play") return;

    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;
    if (keys["ArrowUp"]) player.y -= player.speed;
    if (keys["ArrowDown"]) player.y += player.speed;

    player.x = Math.max(0, Math.min(canvas.width - player.w, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.h, player.y));
}

function drawBackground() {
    let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
    gradient.addColorStop(0, "#14003b");
    gradient.addColorStop(1, "#28006d");
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawShelves() {
    ctx.fillStyle = "#7dd0ff";
    shelves.forEach(s => ctx.fillRect(s.x, s.y, s.w, s.h));
}

function drawPlayer() {
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.w, player.h);
}

function drawTitleScreen() {
    drawBackground();

    // Pixel logo centered
    let w = 300;
    let h = 300 * (logoImg.height / logoImg.width);
    ctx.drawImage(logoImg, canvas.width/2 - w/2, 40, w, h);

    // Text
    ctx.fillStyle = "#ffb3ff";
    ctx.font = "24px monospace";
    ctx.textAlign = "center";
    ctx.fillText("Press ENTER to Start", canvas.width/2, 330);
}

function gameLoop() {
    update();

    if (gameState === "title") {
        drawTitleScreen();
    } else {
        drawBackground();
        drawShelves();
        drawPlayer();
    }

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
